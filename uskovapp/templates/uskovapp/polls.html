{% extends 'uskovapp/base.html' %}
{% load staticfiles %}

{% block 'title' %}Голосования{% endblock %}

{% block 'head-extra' %}
    <link rel="stylesheet" href="{% static 'polls/css/polls.css' %}">
    <script type="text/javascript" src="{% static 'polls/js/polls.js' %}"></script>
{% endblock %}

{% block 'content' %}
{% if user.is_authenticated %}
        Вы на сайте под именем <b>{{ user.username }}</b>.
        <br>
        <a href="{% url 'logout' %}?next={{ request.path }}">Выйти</a>
	<br>
{% else %}
	 Чтобы проголосовать, <a href="{% url 'login' %}?next={{ request.path }}">войдите на сайт или зарегистрируйтесь</a>.
{% endif %}
<hr class="polls-hr">
{% for poll in polls %}
<div class="polls-wrapper" id="poll-{{ poll.pk }}">
<div class="left-top-corner"></div>
<div class="right-top-corner"></div>
<div class="left-bottom-corner"></div>
<div class="right-bottom-corner"></div>
<h3>{{ poll.text }}</h3>
<br>
{% if user.is_authenticated %}
	{% if poll not in polls_user_voted %}
		{% for variant in poll.pollvariants_set.all %}
		<div id="poll-{{ poll.pk }}-{{ variant.pk }}" class="polls-clickable-div">{{ variant.variant_text }}</div>
		{% endfor %}
	{% else %}
		<div id="poll-{{ poll.pk }}-unvote" class="polls-clickable-div">Снять голос</div>
	{% endif %}
{% endif %}
</div>
{% endfor %}

{% endblock %}